{"ast":null,"code":"import axios from 'axios';\nimport { CREATE_POST, POST_ERROR, POST_SUCCESS, GET_POSTS, FETCH_SUCCESS, NOT_FETCHED, START_LOAD, LOADED, DEL_POST, DEL_SUCCESS, DEL_ERROR } from './PostTypes.js';\nexport const creating = post => {\n  return function (dispatch, getState) {\n    //const check=getState();\n    //console.log(\"check \",check);\n    const {\n      AuthReducer: {\n        token\n      }\n    } = getState(); //console.log(token);\n\n    dispatch(create());\n    var config = {\n      method: 'post',\n      url: 'http://localhost:5000/post/createpost',\n      headers: {\n        Authorization: `Bearer ${token}`,\n        'Content-Type': 'multipart/form-data'\n      },\n      data: post\n    };\n    axios(config).then(function (response) {\n      console.log(\"response:\", response);\n      dispatch(createdone(response.data.message));\n    }).catch(function (error) {\n      console.log(\"errors are:\", error.response);\n      dispatch(createerror(error.response.data.errors));\n    });\n  };\n};\nexport const myposts = id => {\n  return function (dispatch, getState) {\n    const {\n      AuthReducer: {\n        token\n      }\n    } = getState();\n    dispatch(getting());\n    var config = {\n      method: 'get',\n      url: `http://localhost:5000/post/myposts/${id}`,\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    };\n    axios(config).then(function (response) {\n      const {\n        data\n      } = response.data; //console.log(\"response\", data);\n\n      dispatch(fetched(data));\n    }).catch(function (error) {\n      console.log(error);\n      dispatch({\n        type: NOT_FETCHED\n      });\n    });\n  };\n};\nexport const showpost = slug => {\n  return function (dispatch) {\n    dispatch(getting());\n    var config = {\n      method: 'get',\n      url: `http://localhost:5000/post/showpost/${slug}`\n    };\n    axios(config).then(function (response) {\n      const {\n        data\n      } = response.data; //console.log(\"showpost data is:\",data);\n\n      dispatch(showpost(data));\n    }).catch(function (error) {\n      console.log(error);\n      dispatch({\n        type: NOT_FETCHED\n      });\n    });\n  };\n};\nexport const allposts = () => {\n  return function (dispatch) {\n    dispatch({\n      type: START_LOAD\n    });\n    var config = {\n      method: 'get',\n      url: 'http://localhost:5000/post/allposts'\n    };\n    axios(config).then(function (response) {\n      const {\n        resp\n      } = response.data; // console.log(\"response is:\",resp);\n\n      dispatch(loaded(resp));\n    }).catch(function (error) {\n      console.log(error);\n      dispatch({\n        type: NOT_FETCHED\n      });\n    });\n  };\n};\nexport const deletepost = id => {\n  return function (dispatch, getState) {\n    const {\n      AuthReducer: {\n        token\n      }\n    } = getState();\n    dispatch(deleting());\n    var config = {\n      method: 'delete',\n      url: `http://localhost:5000/post/deletepost/${id}`,\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    };\n    axios(config).then(function (response) {\n      //console.log(\"this is data\",response);\n      dispatch(deleted(response.data.message));\n    }).catch(function (error) {\n      console.log(\"errors are:\", error.response);\n      dispatch(delerror(error.response.data.errors));\n    });\n  };\n};\n\nconst create = () => {\n  return {\n    type: CREATE_POST\n  };\n};\n\nconst createdone = success => {\n  return {\n    type: POST_SUCCESS,\n    payload: success\n  };\n};\n\nconst createerror = error => {\n  return {\n    type: POST_ERROR,\n    payload: error\n  };\n};\n\nconst getting = () => {\n  return {\n    type: GET_POSTS\n  };\n};\n\nconst fetched = posts => {\n  return {\n    type: FETCH_SUCCESS,\n    payload: posts\n  };\n};\n\nconst loaded = posts => {\n  return {\n    type: LOADED,\n    payload: posts\n  };\n};\n\nconst deleting = () => {\n  return {\n    type: DEL_POST\n  };\n};\n\nconst deleted = success => {\n  return {\n    type: DEL_SUCCESS,\n    payload: success\n  };\n};\n\nconst delerror = error => {\n  return {\n    type: DEL_ERROR,\n    payload: error\n  };\n};","map":{"version":3,"sources":["D:/data1/MERNblog/frontend/src/redux/actions/PostAction.js"],"names":["axios","CREATE_POST","POST_ERROR","POST_SUCCESS","GET_POSTS","FETCH_SUCCESS","NOT_FETCHED","START_LOAD","LOADED","DEL_POST","DEL_SUCCESS","DEL_ERROR","creating","post","dispatch","getState","AuthReducer","token","create","config","method","url","headers","Authorization","data","then","response","console","log","createdone","message","catch","error","createerror","errors","myposts","id","getting","fetched","type","showpost","slug","allposts","resp","loaded","deletepost","deleting","deleted","delerror","success","payload","posts"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\n\r\nimport {\r\n  CREATE_POST,\r\n  POST_ERROR,\r\n  POST_SUCCESS,\r\n  GET_POSTS,\r\n  FETCH_SUCCESS,\r\n   NOT_FETCHED,\r\n   START_LOAD,\r\n   LOADED,\r\n  DEL_POST,\r\nDEL_SUCCESS,\r\nDEL_ERROR\r\n} from './PostTypes.js';\r\n\r\n\r\nexport const creating=(post)=>{\r\n  \r\n      return function (dispatch,getState) {\r\n          //const check=getState();\r\n          //console.log(\"check \",check);\r\n          const {AuthReducer :{ token}}=getState();\r\n          //console.log(token);\r\n          dispatch(create());\r\n          var config = {\r\n            method: 'post',\r\n            url: 'http://localhost:5000/post/createpost',\r\n            headers: { \r\n             Authorization: `Bearer ${token}`,\r\n             'Content-Type': 'multipart/form-data'\r\n             \r\n            },\r\n            data : post\r\n          };\r\n      \r\n          axios(config).then(function (response) { \r\n            console.log(\"response:\",response);\r\n            dispatch(createdone(response.data.message));\r\n          })\r\n         \r\n          .catch(function (error) {\r\n            \r\n            console.log(\"errors are:\",error.response);\r\n           dispatch(createerror(error.response.data.errors));\r\n          });\r\n\r\n\r\n      }\r\n\r\n}\r\n\r\nexport const myposts=(id)=>{\r\n    return function(dispatch,getState) {\r\n     \r\n        const {AuthReducer :{ token}}=getState();\r\n        dispatch(getting());\r\n        var config = {\r\n            method: 'get',\r\n            url: `http://localhost:5000/post/myposts/${id}`,\r\n            headers: { \r\n                Authorization: `Bearer ${token}`,\r\n                \r\n\r\n            }\r\n           \r\n          };\r\n   \r\n          axios(config).then(function (response) {\r\n          const {data }=response.data\r\n            //console.log(\"response\", data);\r\n            dispatch(fetched(data))\r\n          })\r\n          .catch(function (error) {\r\n            console.log(error);\r\n            dispatch({type:NOT_FETCHED})\r\n          });\r\n      \r\n    }\r\n\r\n}\r\n\r\nexport const showpost=(slug)=>{\r\n  return function (dispatch){\r\n    dispatch(getting());\r\n    var config = {\r\n      method: 'get',\r\n      url: `http://localhost:5000/post/showpost/${slug}`,\r\n      \r\n    };\r\n    \r\n    axios(config).then(function (response) {\r\n      const {data}=response.data\r\n      //console.log(\"showpost data is:\",data);\r\n      dispatch(showpost(data));\r\n\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error);\r\n      dispatch({type:NOT_FETCHED})\r\n    });\r\n    \r\n\r\n  }\r\n}\r\n\r\nexport const allposts=()=>{\r\n    return function(dispatch) {\r\n\r\n    dispatch({type:START_LOAD});\r\n    var config = {\r\n        method: 'get',\r\n        url: 'http://localhost:5000/post/allposts',\r\n        \r\n      };\r\n      \r\n      axios(config).then(function (response) {\r\n         const {resp}=response.data\r\n      // console.log(\"response is:\",resp);\r\n        dispatch(loaded(resp));\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n        dispatch({type:NOT_FETCHED})\r\n\r\n      });\r\n    }\r\n}\r\nexport const deletepost=(id)=>{\r\n  return function(dispatch,getState) {\r\n     \r\n    const {AuthReducer :{ token}}=getState();\r\n    dispatch(deleting());\r\n    var config = {\r\n        method: 'delete',\r\n        url: `http://localhost:5000/post/deletepost/${id}`,\r\n        headers: { \r\n            Authorization: `Bearer ${token}`,\r\n            \r\n\r\n        }\r\n       \r\n      };\r\n      axios(config).then(function (response) \r\n       {\r\n              //console.log(\"this is data\",response);\r\n              dispatch(deleted(response.data.message));\r\n       })\r\n      .catch(function (error) \r\n       {\r\n        console.log(\"errors are:\",error.response);\r\n        dispatch(delerror(error.response.data.errors));\r\n       });\r\n  }\r\n\r\n}\r\nconst create=()=>{\r\n    return{\r\n    type:CREATE_POST\r\n    }\r\n\r\n}\r\nconst createdone=(success)=>{\r\n    return {\r\n        type:POST_SUCCESS,\r\n        payload: success\r\n    }\r\n  \r\n}\r\nconst createerror=(error)=>{\r\n    return {\r\n        type:POST_ERROR,\r\n        payload: error\r\n    }\r\n\r\n}\r\nconst getting=()=>{\r\n\r\n    return{\r\n        type:GET_POSTS\r\n        }\r\n}\r\nconst fetched=(posts)=>{\r\n    return {\r\n        type:FETCH_SUCCESS,\r\n        payload: posts\r\n\r\n    }\r\n}\r\n\r\nconst loaded=(posts)=>{\r\n    return{\r\n        type:LOADED,\r\n        payload: posts\r\n    }\r\n}\r\nconst deleting=()=>{\r\n\r\n  return{\r\n      type:DEL_POST\r\n      }\r\n}\r\nconst deleted=(success)=>{\r\n  return{\r\n    type:DEL_SUCCESS,\r\n    payload:success\r\n  }\r\n}\r\nconst delerror=(error)=>{\r\n  return{\r\n    type:DEL_ERROR,\r\n    payload:error\r\n  }\r\n\r\n}"]},"metadata":{},"sourceType":"module"}